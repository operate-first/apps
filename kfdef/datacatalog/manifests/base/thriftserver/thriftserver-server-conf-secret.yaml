---
apiVersion: v1
kind: Secret
metadata:
  name: thriftserver-server-conf
stringData:
  thrift-server.conf: |-
    spark.master=$(spark_url)
    spark.hadoop.fs.s3a.impl=org.apache.hadoop.fs.s3a.S3AFileSystem
    spark.hadoop.fs.s3a.endpoint=$(s3_endpoint)
    spark.hadoop.javax.jdo.option.ConnectionDriverName=org.postgresql.Driver
    spark.hadoop.datanucleus.rdbms.datastoreAdapterClassName=org.datanucleus.store.rdbms.adapter.PostgreSQLAdapter
    spark.hadoop.javax.jdo.option.ConnectionUserName=datacatalog
    spark.hadoop.javax.jdo.option.ConnectionPassword=datacatalog
    spark.hadoop.javax.jdo.option.ConnectionURL=jdbc:postgresql://postgresql.$(namespace).svc:5432/datacatalog
    spark.driver.host=thriftserver.$(namespace).svc
    spark.driver.port=42000
    spark.blockManager.port=42100
    spark.driver.bindAddress=0.0.0.0
    spark.sql.warehouse.dir=/spark-warehouse
    spark.cores.max=$(spark_max_cores)
    spark.executor.memory=$(spark_executor_memory)
    spark.driver.memory=$(spark_driver_memory)
    spark.sql.adaptive.enabled=true
    spark.sql.thriftServer.incrementalCollect=true
